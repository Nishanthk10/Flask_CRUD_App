{% include 'header.html' %}
{% extends 'base.html' %}
{% block title %} Order Page {% endblock %}
{% block body %}
<div class="jumbotron p-3">
    <div class="well text-center">
        <h1>Order Page</h1>
    </div>
</div>
<div class="container">
    <div class="row" style="background:lightgrey;">
        <div class="col md-12">  

            <div class="jumbotron p-3">
                <h2>Manage <b>Orders</b> <button type="button" class="btn btn-success float-end" data-bs-toggle="modal" data-bs-target="#mymodal">Add New Order</button></h2>

                {% with messages = get_flashed_messages() %}
                {% if messages %}
                {% for message in messages %}
                <div class="alert alert-success alert-dismissable" role="alert">
                    <button type="button" style="border: #fff; background: #d1e7dd;" class="float-end" data-bs-dismiss="alert" aria-label="close">x</button>
                    {{message}}
                </div>
                {% endfor %}
                {% endif %}
                {% endwith %}


                <table class="table table-hover table-dark" style="font-size: 14px;">
                    <tr>
                        <th>Order ID</th>
                        <th>Customer ID</th>
                        <th>Employee ID</th>
                        <th>Order Date</th>
                        <th>Required Date</th>
                        <th>Shipped Date</th>
                        <th>Ship Via</th>
                        <th>Freight</th>
                        <th>Ship Name</th>
                        <th>Ship Address</th>
                        <th>Ship City</th>
                        <th>Ship Region</th>
                        <th>Ship Postal Code</th>
                        <th>Ship Country</th>
                        <th style="padding-right: 91px;">Actions</th>
                    </tr>
                    {% for row in orders %}
                    <tr style="font-size: 12px;">
                        <td>{{row.orderid}}</td>
                        <td>{{row.customerid}}</td>
                        <td>{{row.employeeid}}</td>
                        <td>{{row.orderdate}}</td>
                        <td>{{row.requireddate}}</td>
                        <td>{{row.shippeddate}}</td>
                        <td>{{row.shipvia}}</td>
                        <td>{{row.freight}}</td>
                        <td>{{row.shipname}}</td>
                        <td>{{row.shipaddress}}</td>
                        <td>{{row.shipcity}}</td>
                        <td>{{row.shipregion}}</td>
                        <td>{{row.shippostalcode}}</td>
                        <td>{{row.shipcountry}}</td>
                        <td>
                            <a href="/orders/update/{{row.orderid}}" class="btn btn-warning btn-xs" data-bs-toggle="modal" data-bs-target="#modaledit{{row.orderid}}">Edit</a>
                            <a href="/orders/delete/{{row.orderid}}" class="btn btn-danger btn-xs" onclick="return confirm('Are You Sure To Delete?')">Delete</a>
                        </td> 
                    </tr>
                    <!-- Modal Edit Order-->
            <div id="modaledit{{row.orderid}}" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Update Information</h4>
                        </div>
                        <div class="modal-body">
                            <form action="{{url_for('updateorder')}}" method="POST">
                                <div class="form-group">
                                    <label>Customer ID:</label>
                                    <input type="hidden" name="orderid" value="{{row.orderid}}">  
                                    <input type="text" class="form-control" name="customerid" value="{{row.customerid}}">
                                </div>
                                <div class="form-group">
                                    <label>Employee ID:</label> 
                                    <input type="number" class="form-control" name="employeeid" value="{{row.employeeid}}">
                                </div>
                                <div class="form-group">
                                    <label>Order Date:</label> 
                                    <input type="datetime-local" class="form-control" name="orderdate" value="{{row.orderdate}}">
                                </div>
                                <div class="form-group">
                                    <label>Required Date:</label> 
                                    <input type="datetime-local" class="form-control" name="requireddate" value="{{row.requireddate}}">
                                </div>
                                <div class="form-group">
                                    <label>Shipped Date:</label> 
                                    <input type="datetime-local" class="form-control" name="shippeddate" value="{{row.shippeddate}}">
                                </div>
                                <div class="form-group">
                                    <label>Ship Via:</label> 
                                    <input type="number" class="form-control" name="shipvia" value="{{row.shipvia}}">
                                </div>
                                <div class="form-group">
                                    <label>Freight:</label> 
                                    <input type="number" class="form-control" name="freight" value="{{row.freight}}">
                                </div>
                                <div class="form-group">
                                    <label>Ship Name:</label> 
                                    <input type="text" class="form-control" name="shipname" value="{{row.shipname}}">
                                </div>
                                <div class="form-group">
                                    <label>Ship Address:</label> 
                                    <input type="text" class="form-control" name="shipaddress" value="{{row.shipaddress}}">
                                </div>
                                <div class="form-group">
                                    <label>Ship City:</label> 
                                    <input type="text" class="form-control" name="shipcity" value="{{row.shipcity}}">
                                </div>
                                <div class="form-group">
                                    <label>Ship Region:</label> 
                                    <input type="text" class="form-control" name="shipregion" value="{{row.shipregion}}">
                                </div>
                                <div class="form-group">
                                    <label>Ship Postal Code:</label> 
                                    <input type="text" class="form-control" name="shippostalcode" value="{{row.shippostalcode}}">
                                </div>
                                <div class="form-group">
                                    <label>Ship Country:</label> 
                                    <input type="text" class="form-control" name="shipcountry" value="{{row.shipcountry}}">&nbsp;
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-primary" type="submit">Update</button>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
                {% endfor %}
                </table>
            </div>
            <!-- Modal Add Order-->
            <div id="mymodal" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Add Order</h4>
                        </div>
                        <div class="modal-body">
                            <form action="{{url_for('insertorder')}}" method="POST">
                                <div class="form-group">
                                    <label>Order ID:</label> 
                                    <input type="number" class="form-control" name="orderid" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Customer ID:</label> 
                                    <input type="text" class="form-control" name="customerid" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Employee ID:</label> 
                                    <input type="number" class="form-control" name="employeeid" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Order Date:</label> 
                                    <input type="datetime-local" class="form-control" name="orderdate" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Required Date:</label> 
                                    <input type="datetime-local" class="form-control" name="requireddate" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Shipped Date:</label> 
                                    <input type="datetime-local" class="form-control" name="shippeddate" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Ship Via:</label> 
                                    <input type="number" class="form-control" name="shipvia" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Freight:</label> 
                                    <input type="number" class="form-control" name="freight" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Ship Name:</label> 
                                    <input type="text" class="form-control" name="shipname" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Ship Address:</label> 
                                    <input type="text" class="form-control" name="shipaddress" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Ship City:</label> 
                                    <input type="text" class="form-control" name="shipcity" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Ship Region:</label> 
                                    <input type="text" class="form-control" name="shipregion" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Ship Postal Code:</label> 
                                    <input type="text" class="form-control" name="shippostalcode" required='1'>
                                </div>
                                <div class="form-group">
                                    <label>Ship Country:</label> 
                                    <input type="text" class="form-control" name="shipcountry" required='1'>&nbsp;
                                </div>
                                    <button class="btn btn-primary" type="submit">Add Order</button>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}